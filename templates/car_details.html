<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Details</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #3563E9;
            --secondary: #90A3BF;
            --dark: #1A202C;
            --light: #F6F7F9;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --border-radius: 10px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .back-link {
            display: flex;
            align-items: center;
            color: var(--dark);
            text-decoration: none;
            gap: 8px;
            font-weight: 500;
        }

        .navigation {
            background-color: var(--white);
            padding: 12px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }

        .nav-tabs {
            display: flex;
            list-style: none;
            overflow-x: auto;
            gap: 24px;
            padding: 0 20px;
        }

        .nav-tabs li a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            padding: 8px 0;
            display: block;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .nav-tabs li.active a {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }

        .nav-tabs li a:hover {
            color: var(--primary);
        }

        /* Main Content */
        .content {
            padding: 24px 0;
        }

        .car-gallery {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 24px;
            margin-bottom: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .car-image {
            width: 100%;
            height: 300px;
            overflow: hidden;
            border-radius: var(--border-radius);
            margin-bottom: 16px;
        }

        .car-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: var(--border-radius);
        }

        .car-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 16px;
        }

        .car-name h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .car-year {
            color: var(--secondary);
            font-size: 16px;
        }

        .car-price {
            background-color: var(--light);
            padding: 12px 16px;
            border-radius: var(--border-radius);
        }

        .price-label {
            font-size: 12px;
            color: var(--secondary);
        }

        .price-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }

        .car-specs {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 24px;
            width: 100%;
        }

        .spec-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .spec-icon {
            background-color: rgba(53, 99, 233, 0.1);
            color: var(--primary);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .spec-details {
            display: flex;
            flex-direction: column;
        }

        .spec-label {
            font-size: 12px;
            color: var(--secondary);
        }

        .spec-value {
            font-weight: 600;
        }

        .car-details-container {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 24px;
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light);
        }

        .detailed-specs {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }

        .spec-group {
            margin-bottom: 24px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--light);
        }

        .detail-label {
            color: var(--secondary);
        }

        .detail-value {
            font-weight: 500;
        }

        /* Recommendations */
        .recommendations {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 24px;
        }

        .recommended-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 16px;
        }

        .car-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }

        .car-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .car-card-image {
            height: 160px;
            overflow: hidden;
        }

        .car-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .car-card-content {
            padding: 16px;
        }

        .car-card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .car-card-specs {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 12px;
        }

        .car-card-spec {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--secondary);
            font-size: 14px;
            margin-bottom: 8px;
            width: 48%;
        }

        .car-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 12px;
            border-top: 1px solid var(--light);
        }

        .car-card-price {
            font-weight: 700;
            color: var(--primary);
        }

        .view-details {
            background-color: var(--primary);
            color: var(--white);
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .car-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .car-specs {
                grid-template-columns: repeat(2, 1fr);
            }

            .detailed-specs {
                grid-template-columns: 1fr;
            }
            .button-360-view {
            background-color: #4CAF50; /* Green background */
            color: white; /* White text */
            font-size: 16px; /* Font size */
            padding: 10px 20px; /* Padding around the text */
            border: none; /* Remove border */
            border-radius: 5px; /* Rounded corners */
            cursor: pointer; /* Pointer cursor on hover */
            margin: 10px; /* Space around the button */
            text-align: center; /* Center the text */
        }

        .button-360-view:hover {
            background-color: #45a049; /* Darker green on hover */
        }

        }
    </style>
</head>
<body>
    <header>
        <div class="container nav-container">
            <div class="logo">S2 Car Showroom</div>
            <a href="cars.html" class="back-link">
                <i class="fas fa-arrow-left"></i> Back to List
            </a>
        </div>
        <button id="360ViewBtn" class="button-360-view">360 VIEW</button>
        <nav class="navigation">
            <ul class="nav-tabs container">
                <li class="active"><a href="#details">DETAILS</a></li>
                <li><a href="#price">PRICE</a></li>
                <li><a href="#compare">COMPARE</a></li>
                <li><a href="#images">IMAGES</a></li>
                <li><a href="#specs">SPECS</a></li>
                <li><a href="#reviews">USER REVIEWS</a></li>
                <li><a href="../new.html" target="_blank">360 VIEW</a></li>
                <li><a href="#variants">VARIANTS</a></li>
                <li><a href="#videos">VIDEOS</a></li>
                <li><a href="#more">MORE</a></li>
            </ul>
        </nav>
    </header>

    <div class="container content">
        <div class="car-gallery" id="details">
            <div class="car-image">
                <img id="carImg" src="/api/placeholder/800/400" alt="Car Image">
            </div>
            <div class="car-title">
                <div class="car-name">
                    <h1 id="carTitle">Car Name</h1>
                    <div class="car-year" id="carYear">Year</div>
                </div>
                <div class="car-price">
                    <div class="price-label">Price</div>
                    <div class="price-value" id="carPrice">₹0</div>
                </div>
            </div>
            <div class="car-specs">
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="spec-details">
                        <div class="spec-label">Type</div>
                        <div class="spec-value" id="carType">Sedan</div>
                    </div>
                </div>
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-gas-pump"></i>
                    </div>
                    <div class="spec-details">
                        <div class="spec-label">Fuel</div>
                        <div class="spec-value" id="carFuel">Petrol</div>
                    </div>
                </div>
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="spec-details">
                        <div class="spec-label">Transmission</div>
                        <div class="spec-value" id="carTransmission">Automatic</div>
                    </div>
                </div>
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="spec-details">
                        <div class="spec-label">Seating</div>
                        <div class="spec-value" id="carSeats">5 People</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="car-details-container" id="specs">
            <h2 class="section-title">Technical Specifications</h2>
            <div class="detailed-specs">
                <div class="spec-group">
                    <div class="detail-item">
                        <div class="detail-label">Engine Size</div>
                        <div class="detail-value" id="engineSize">N/A</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Power</div>
                        <div class="detail-value" id="power">N/A</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Torque</div>
                        <div class="detail-value" id="torque">N/A</div>
                    </div>
                </div>
                <div class="spec-group">
                    <div class="detail-item">
                        <div class="detail-label">Mileage</div>
                        <div class="detail-value" id="mileage">N/A</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fuel Type</div>
                        <div class="detail-value" id="fuelType">N/A</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Transmission</div>
                        <div class="detail-value" id="transmission">N/A</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="recommendations" id="recommendations">
            <h2 class="section-title">Recommended Cars</h2>
            <div class="recommended-list" id="recommendedList">
                <!-- Recommended cars will be populated here -->
            </div>
        </div>
    </div>

    <script>
        
        document.getElementById('360ViewBtn').addEventListener('click', function() {
            window.open('../new.html', '_blank'); // Opens new.html in a new tab
        });

        function getProperty(car, key) {
            return car[key] || car[key.replace(/\s/g, '')] || 'N/A';
        }
    
        // Get the selected car and all cars from localStorage
        const car = JSON.parse(localStorage.getItem('selectedCar'));
        const allCars = JSON.parse(localStorage.getItem('allCars')) || []; // all cars from main page
    
        // Log the selected car and all cars data to ensure they're loaded correctly
        console.log("Selected Car:", car);
        console.log("All Cars:", allCars);
    
        if (!car) {
            alert('No car data found.');
            document.getElementById('carTitle').textContent = 'No car details available.';
        } else {
            displayCarDetails(car);
            displayRecommendations(car);
        }
    
        // Display the selected car's details
        // Display the selected car's details
        function displayCarDetails(car) {
            const fixedImageUrl = 'https://clippingpathstudio.com/wp-content/uploads/2022/08/360-car-photo-editing.gif';  // Fallback image
            const make = getProperty(car, 'Make');
            const model = getProperty(car, 'Model');
            const year = getProperty(car, 'Year');
            const price = parseFloat(getProperty(car, 'Price_IR') || 0).toLocaleString('en-IN');
            const type = getProperty(car, 'Car_Type');
            const fuel = getProperty(car, 'Fuel_Type');
            const transmission = getProperty(car, 'Transmission_type');
            const seats = getProperty(car, 'Seats');
            const engineSize = getProperty(car, 'Engine_Size_L');
            const mileage = getProperty(car, 'Mileage');
            const power = getProperty(car, 'Power');
            const torque = getProperty(car, 'Torque');
            
            // Set the car image (use car.ImageURL or fallback)
            const imageUrl = car.ImageURL || fixedImageUrl;
            document.getElementById('carImg').src = imageUrl;
            document.getElementById('carImg').alt = `${make} ${model}`;

            // Set the basic car info
            document.getElementById('carTitle').textContent = `${make} ${model}`;
            document.getElementById('carYear').textContent = year;
            document.getElementById('carPrice').textContent = `₹${price}`;
            document.getElementById('carType').textContent = type;
            document.getElementById('carFuel').textContent = fuel;
            document.getElementById('carTransmission').textContent = transmission;
            document.getElementById('carSeats').textContent = `${seats} Seats`;
            
            // Set the detailed specs
            document.getElementById('engineSize').textContent = engineSize;
            document.getElementById('power').textContent = power;
            document.getElementById('torque').textContent = torque;
            document.getElementById('mileage').textContent = mileage;
            document.getElementById('fuelType').textContent = fuel;
            document.getElementById('transmission').textContent = transmission;
        }

    
        // Display recommendations based on the selected car
        function displayRecommendations(selectedCar) {
            const recommendationSection = document.getElementById('recommendedList');
            recommendationSection.innerHTML = ''; // Clear recommendations first
    
            const selectedMake = getProperty(selectedCar, 'Make');
            const selectedPrice = parseFloat(getProperty(selectedCar, 'Price_IR') || 0);
    
            console.log("Selected Make:", selectedMake);
            console.log("Selected Price:", selectedPrice);
    
            if (!selectedMake || !selectedPrice) {
                recommendationSection.innerHTML = '<p>Cannot generate recommendations without make or price data.</p>';
                return;
            }
    
            // Filter cars by make and price range (+-20%)
            const recommendedCars = allCars.filter(car => {
                const carMake = getProperty(car, 'Make');
                const carPrice = parseFloat(getProperty(car, 'Price_IR') || 0);
    
                // Check if car is of the same make and within the price range
                const priceMatch = carPrice >= (selectedPrice * 0.8) && carPrice <= (selectedPrice * 1.2);
                const makeMatch = carMake === selectedMake;
    
                return makeMatch && priceMatch && car !== selectedCar;
            });
    
            console.log("Recommended Cars after filtering:", recommendedCars);
    
            // If recommendations are found, display them
            if (recommendedCars.length > 0) {
                recommendedCars.forEach(car => {
                    const carCard = document.createElement('div');
                    carCard.className = 'car-card';
                    carCard.innerHTML = `
                        <div class="car-card-image">
                            <img src="/Car/3.jpg" alt="${getProperty(car, 'Make')} ${getProperty(car, 'Model')}">
                        </div>
                        <div class="car-card-content">
                            <h3 class="car-card-title">${getProperty(car, 'Make')} ${getProperty(car, 'Model')}</h3>
                            <div class="car-card-specs">
                                <div class="car-card-spec">
                                    <i class="fas fa-calendar-alt"></i> ${getProperty(car, 'Year')}
                                </div>
                                <div class="car-card-spec">
                                    <i class="fas fa-gas-pump"></i> ${getProperty(car, 'Fuel_Type')}
                                </div>
                                <div class="car-card-spec">
                                    <i class="fas fa-cogs"></i> ${getProperty(car, 'Transmission_type')}
                                </div>
                                <div class="car-card-spec">
                                    <i class="fas fa-tachometer-alt"></i> ${getProperty(car, 'Mileage')}
                                </div>
                            </div>
                            <div class="car-card-footer">
                                <div class="car-card-price">₹${parseFloat(getProperty(car, 'Price_IR') || 0).toLocaleString('en-IN')}</div>
                                <button class="view-details" onclick="viewRecommendedCar(${allCars.indexOf(car)})">View Details</button>
                            </div>
                        </div>
                    `;
                    recommendationSection.appendChild(carCard);
                });
            } else {
                recommendationSection.innerHTML = '<p>No similar cars found based on the selected criteria.</p>';
            }
        }
    
        // Load a recommended car when clicked
        function viewRecommendedCar(index) {
            const selected = allCars[index];
            localStorage.setItem('selectedCar', JSON.stringify(selected)); // Save selected car to localStorage
            window.location.reload(); // Reload the current page to display the selected car's details
        }
        
        // Handle tab navigation (just for UI - no actual page change)
        document.querySelectorAll('.nav-tabs li a').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-tabs li').forEach(item => {
                    item.classList.remove('active');
                });
                this.parentElement.classList.add('active');
                
                // Scroll to section if it exists
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
    </body>
    </html>
    